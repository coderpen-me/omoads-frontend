
{% load staticfiles %}
<html>
<head>
        <meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.2/css/bootstrap.min.css" integrity="sha384-Smlep5jCw/wG7hdkwQ/Z5nLIefveQRIY9nfy6xoR1uRYBtpZgI6339F5dgvm/e9B" crossorigin="anonymous">
<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.1.1/css/all.css" integrity="sha384-O8whS3fhG2OnA5Kas0Y9l3cfpmYjapjI0E4theH4iuMD+pLhbf6JI0jIMfYcK3yZ" crossorigin="anonymous">
<link rel="stylesheet" href="{% static 'css/app.css' %}"/>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.7.0/animate.min.css"/>
</head>
<body>
  
 
<div class="row">

    <div class="col-md-12" style="margin:0;padding:0px;border:0px;">

            <div class="paper nav-fixed" >
                OmoAds
                <button class="btn btn-share"><i class="fas fa-share-alt"></i></button>
            </div>
            <br><br>
            

            <div id="app-view">
                <div class="info-bar-small">
                    <i style="float:left;margin-left:1em;margin-top:5px;" class="fas fa-times" ></i>
                    <p style="float:left;margin-left:1em;">Name of the 360 View.</p>
                    <i style="float:left;margin-left:1em;margin-top:5px;"class="fas fa-info-circle"></i>
                    <br>
                    <hr width="100%" />
                    <i style="float:left;margin-left:calc(100% - 100px);margin-top:5px;"class="fas fa-chevron-left"></i>
                    <i style="float:left;margin-left:1em;margin-top:5px;"class="fas fa-chevron-right"></i>
                </div>
                <div class="vr-container">
                    
                    <div class="swip__card" id='swip-card'>
                        <div class="vr" id='vrview' active-view-id="0" ></div>
                        <div class="info-block" state="close">
                            <h5>Lorem ipsum dolor sit amet.</h5>
                            <ul style="list-style: none;text-align: left;font-size: 12px;">
                                <li style="display:inline;margin-left:2em;"><b>Pole ID :</b> 23</li>
                                <li style="display:inline;margin-left:2em;"><b>Dimensions :</b>300x400</li>
                                <li style="display:inline;margin-left:2em;"><b>Type :</b>abc</li>
                                <br>
                                <li style="display:inline;margin-left:2em;"><b>Lighted :</b> Lorem</li>
                                <li style="display:inline;margin-left:2em;"><b>Facing :</b> Lorem</li>
                                <li style="display:inline;margin-left:2em;"><b>Zone:</b>anc</li>
                            </ul>
                            
                            <button class="btn btn-avail">Check Availibilty</button>
                        </div>
                        <div class="swip__card__choice m--reject"></div>
                        <div class="swip__card__choice m--like"></div>
                        <div class="swip__card__drag"></div>
                    </div>
                    <div class="swip__card" id='swip-card1'>
                        <div class="vr" id='vrview' active-view-id="0" ></div>
                        <div class="info-block" state="close">
                            <h5>Lorem ipsum dolor sit amet.</h5>
                            <ul style="list-style: none;text-align: left;font-size: 12px;">
                                <li style="display:inline;margin-left:2em;"><b>Pole ID :</b> 23</li>
                                <li style="display:inline;margin-left:2em;"><b>Dimensions :</b>300x400</li>
                                <li style="display:inline;margin-left:2em;"><b>Type :</b>abc</li>
                                <br>
                                <li style="display:inline;margin-left:2em;"><b>Lighted :</b> Lorem</li>
                                <li style="display:inline;margin-left:2em;"><b>Facing :</b> Lorem</li>
                                <li style="display:inline;margin-left:2em;"><b>Zone:</b>anc</li>
                            </ul>
                            
                            <button class="btn btn-avail">Check Availibilty</button>
                        </div>
                        <div class="swip__card__choice m--reject"></div>
                        <div class="swip__card__choice m--like"></div>
                        <div class="swip__card__drag"></div>
                    </div>
                    
                </div>
            <div><!-- app view-->
				
                
                <!-- gallary deprecated-->
                <div class="gallay-wrapper" style="display:none;">
                    <button class="btn btn-more">
                            <i state="up" class="fas fa-chevron-up" id="btn-more-icon"></i>
                    </button> 
                </div>
           

    </div>
</div>
 
	


</body>
</html>

<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.2/js/bootstrap.min.js" integrity="sha384-o+RDsa0aLu++PJvFqy8fFScvbHFLtbvScb8AjopnFD+iEQ7wo/CG0xlczd+2O/em" crossorigin="anonymous"></script>
<script src="https://storage.googleapis.com/vrview/2.0/build/vrview.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/swing/3.0.2/swing.js"></script>
<script src="https://hammerjs.github.io/dist/hammer.js"></script>
<script>
/*
// https://github.com/gajus/swing
var myElement = document.getElementById('swip-card');

// create a simple instance
// by default, it only adds horizontal recognizers
var mc = new Hammer(myElement);

// listen to events...
//panleft panright tap press
mc.on("panleft panright tap press swip", function(ev) {
    //var direction = e.gesture.direction;

    //myElement.textContent = ev.type;

    if(ev.type == 'tap'){
        $("#swip-card").css("background","#ff0000");
        $("#swip-card").addClass("animated bounce");
        $('.info-block').toggle();

    }
    if(ev.type == 'panleft'){
        $("#swip-card").css("background","#00ff00");
        $("#swip-card").addClass("to-left");
        //$('.info-block').hide();
    }
    if(ev.type == 'panright'){
        $("#swip-card").css("background","#0000ff");
        $("#swip-card").addClass("to-right");
        //$('.info-block').hide();    
    }
    
});
*/
//window.addEventListener('load', onVrViewLoad);

var url = "https://cdn1.360cities.net/pano/senord/01458239_key_biscayne.jpg/equirect_crop_3_1/6.jpg";


// Selector '#vrview' finds element with id 'vrview'.
var vrView = new VRView.Player('#vrview', {
  image: url,
  preview: 'https://cdn1.360cities.net/pano/senord/01458239_key_biscayne.jpg/equirect_crop_3_1/6.jpg',
  is_debug: false,
  width: '100%',
  height: '350',
  //is_stereo: true
  is_vr_off: false
});
	
function loadScene(id) {
  console.log('loadScene', id);

  // Set the image
  vrView.setContent({
    image: dataObject.view_data[parseInt(id)].url,
    preview: dataObject.view_data[parseInt(id)].url,
    is_stereo: false,
    is_autopan_off: true
  });
}

//onVrViewLoad(url);

var data = `{
	"view_data":[
	
			{"viewId":1,
			 "url" : "https://cdn1.360cities.net/pano/senord/01458239_key_biscayne.jpg/equirect_crop_3_1/6.jpg",
			 "info":"Lorem ipsum dolor sit amet consectetur adipisicing elit. Deleniti eveniet rem totam asperiores molestiae, magnam minus tempore veniam voluptas autem."
			
			},
			{"viewId":2,
			 "url" : "https://cdn.eso.org/images/screen/hqe-pano1.jpg",
			 "info":"Lorem ipsum dolor sit amet consectetur adipisicing elit. Deleniti eveniet rem totam asperiores molestiae, magnam minus tempore veniam voluptas autem."
			
			},
			{"viewId":3,
			 "url" : "https://omos.s3.amazonaws.com/img/images/Glen-Beach-Panorama-Google-4096x2048.jpg",
			 "info":"Lorem ipsum dolor sit amet consectetur adipisicing elit. Deleniti eveniet rem totam asperiores molestiae, magnam minus tempore veniam voluptas autem."
			
			},
			{"viewId":4,
			 "url" : "http://www.stockhamster.com/images/26866.jpg",
			 "info":"Lorem ipsum dolor sit amet consectetur adipisicing elit. Deleniti eveniet rem totam asperiores molestiae, magnam minus tempore veniam voluptas autem."
			
			},
			{"viewId":5,
			 "url" : "https://omos.s3.amazonaws.com/img/images/Glen-Beach-Panorama-Google-4096x2048.jpg",
			 "info":"Lorem ipsum dolor sit amet consectetur adipisicing elit. Deleniti eveniet rem totam asperiores molestiae, magnam minus tempore veniam voluptas autem."
			
			},
			{"viewId":6,
			 "url" : "https://img1.cgtrader.com/items/929693/756fdb023a/hdri-industrial-warehouse-interior-8-3d-model-low-poly.jpg",
			 "info":"Lorem ipsum dolor sit amet consectetur adipisicing elit. Deleniti eveniet rem totam asperiores molestiae, magnam minus tempore veniam voluptas autem."
			
			}
	
	
	]


}`;

var dataObject = JSON.parse(data);
var MAX = dataObject.view_data.length;

console.log(MAX);
$("[id=open-full]").on("click",function(){
	var viewId = $(this).attr("view-id"); 
	//var url = $(this).attr("url"); 
    $(".img-block-container").hide(0);
    $("#app-view").show(100);
    $("#vrview").attr("active-view-id",viewId);
    //console.log(viewId);
});

$(".btn-more").on("click",function(){

    var state = $("#btn-more-icon").attr("state");
    if(state == "up"){
        $("#btn-more-icon").removeClass("fa-chevron-up");
        $("#btn-more-icon").addClass("fa-chevron-down");
        $("#btn-more-icon").attr("state","down");
        $(".gallay-wrapper").css("top","100px");
        $(".gallay-wrapper").css("height","700px");
    }
    else{
        $("#btn-more-icon").removeClass("fa-chevron-down");
        $("#btn-more-icon").addClass("fa-chevron-up");
        $("#btn-more-icon").attr("state","up");
        $(".gallay-wrapper").css("top","550px");
        $(".gallay-wrapper").css("height","160px");
    }
    

});
$(".fa-info-circle").on("click",function(){

    var state = $(".info-block").attr("state");
    if(state == "open"){
        $(".info-block").hide(100);
        $(".info-block").attr("state","close");
    }
    else{
        $(".info-block").show(100);
        $(".info-block").attr("state","open");
    }
    
});
$(".fa-times").on("click",function(){
	$(".img-block-container").show(100);
    $("#app-view").hide(0);
});
$(".fa-chevron-left").on("click",function(){
	var viewId = $("#vrview").attr("active-view-id");
	
	if(parseInt(viewId) <= 1){ 
		alert("This is the last");
	}
	else{
		//alert(viewId);
		$("#vrview").attr("active-view-id",parseInt(viewId)-1);
		loadScene(parseInt(viewId)-1);
	}
});
$(".fa-chevron-right").on("click",function(){
	var viewId = $("#vrview").attr("active-view-id");
	
	if(parseInt(viewId) >= MAX){ 
		alert("This is the last");
	}
	else{
		//alert(viewId);
		$("#vrview").attr("active-view-id",parseInt(viewId)+1);
		loadScene(parseInt(viewId)+1);
	}
	
});


$(document).ready(function() {

var animating = false;
var cardsCounter = 0;
var numOfCards = 6;
var decisionVal = 80;
var pullDeltaX = 0;
var deg = 0;
var $card, $cardReject, $cardLike;

function pullChange() {
  animating = true;
  deg = pullDeltaX / 10;
  $card.css("transform", "translateX("+ pullDeltaX +"px) rotate("+ deg +"deg)");

  var opacity = pullDeltaX / 100;
  var rejectOpacity = (opacity >= 0) ? 0 : Math.abs(opacity);
  var likeOpacity = (opacity <= 0) ? 0 : opacity;
  $cardReject.css("opacity", rejectOpacity);
  $cardLike.css("opacity", likeOpacity);
};

function release() {

  if (pullDeltaX >= decisionVal) {
    $card.addClass("to-right");
  } else if (pullDeltaX <= -decisionVal) {
    $card.addClass("to-left");
  }

  if (Math.abs(pullDeltaX) >= decisionVal) {
    $card.addClass("inactive");

    setTimeout(function() {
      $card.addClass("below").removeClass("inactive to-left to-right");
      cardsCounter++;
      if (cardsCounter === numOfCards) {
        cardsCounter = 0;
        $(".swip__card").removeClass("below");
      }
    }, 300);
  }

  if (Math.abs(pullDeltaX) < decisionVal) {
    $card.addClass("reset");
  }

  setTimeout(function() {
    $card.attr("style", "").removeClass("reset")
      .find(".swip__card__choice").attr("style", "");

    pullDeltaX = 0;
    animating = false;
  }, 300);
};

$(document).on("mousedown touchstart", ".swip__card:not(.inactive)", function(e) {
  if (animating) return;

  $card = $(this);
  $cardReject = $(".swip__card__choice.m--reject", $card);
  $cardLike = $(".swip__card__choice.m--like", $card);
  var startX =  e.pageX || e.originalEvent.touches[0].pageX;

  $(document).on("mousemove touchmove", function(e) {
    var x = e.pageX || e.originalEvent.touches[0].pageX;
    pullDeltaX = (x - startX);
    if (!pullDeltaX) return;
    pullChange();
  });

  $(document).on("mouseup touchend", function() {
    $(document).off("mousemove touchmove mouseup touchend");
    if (!pullDeltaX) return; // prevents from rapid click events
    release();
  });
});

});

</script>




